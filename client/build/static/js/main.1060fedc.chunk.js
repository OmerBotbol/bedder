(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,a){"use strict";function s(e,t,a){var s;if(a){var c=new Date;c.setTime(c.getTime()+a),s="; expires="+c.toGMTString()}else s="";document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+"; path=/"}function c(e){for(var t=encodeURIComponent(e)+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var c=a[s];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(t))return decodeURIComponent(c.substring(t.length,c.length))}return null}function n(e){s(e,"",-1)}a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return s}))},125:function(e,t,a){},13:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return o}));var s=a(7),c=a.n(s),n=a(11),r=function(e,t){return c.a.get(e,{headers:{authorization:"Bearer "+Object(n.c)(t)}})},i=function(e,t){return c.a.post(e,t,{headers:{authorization:"Bearer "+Object(n.c)("accessToken")}})},l=function(e,t){return c.a.put(e,t,{headers:{authorization:"Bearer "+Object(n.c)("accessToken")}})},o=function(e,t){return c.a.delete(e,{headers:{Authorization:"Bearer "+Object(n.c)("accessToken")},data:t})}},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(20),r=a.n(n),i=(a(89),a(2)),l=(a(90),a(12)),o=a(9),d=a(8),j=a.n(d),b=a(14),u=(a(52),a(53),a(28)),O=a(13),h=a(7),m=a.n(h),p=(a(125),a(0));function x(e){var t=e.user,a=Object(s.useState)(""),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)(""),d=Object(i.a)(l,2),h=d[0],x=d[1],f=Object(s.useState)(""),v=Object(i.a)(f,2),g=v[0],N=v[1],y=Object(s.useState)(0),w=Object(i.a)(y,2),k=w[0],S=w[1],C=Object(s.useState)(0),D=Object(i.a)(C,2),_=D[0],A=D[1],T=Object(s.useState)(!1),R=Object(i.a)(T,2),F=R[0],P=R[1],L=Object(s.useState)(!1),E=Object(i.a)(L,2),I=E[0],B=E[1],q=Object(s.useState)(!1),z=Object(i.a)(q,2),U=z[0],M=z[1],G=Object(s.useState)(!1),K=Object(i.a)(G,2),H=K[0],Z=K[1],V=Object(s.useState)(!1),J=Object(i.a)(V,2),Y=J[0],X=J[1],W=Object(s.useState)(!1),Q=Object(i.a)(W,2),$=Q[0],ee=Q[1],te=Object(s.useState)(!1),ae=Object(i.a)(te,2),se=ae[0],ce=ae[1],ne=Object(s.useState)(""),re=Object(i.a)(ne,2),ie=re[0],le=re[1],oe=Object(s.useState)(""),de=Object(i.a)(oe,2),je=de[0],be=de[1],ue=Object(s.useState)(""),Oe=Object(i.a)(ue,2),he=Oe[0],me=Oe[1],pe=Object(s.useState)(""),xe=Object(i.a)(pe,2),fe=xe[0],ve=xe[1],ge=Object(s.useState)(""),Ne=Object(i.a)(ge,2),ye=Ne[0],we=Ne[1],ke=Object(s.useState)(""),Se=Object(i.a)(ke,2),Ce=Se[0],De=Se[1],_e=Object(s.useState)(!1),Ae=Object(i.a)(_e,2),Te=Ae[0],Re=Ae[1],Fe=Object(s.useState)({startDate:new Date,endDate:new Date,key:"selection"}),Pe=Object(i.a)(Fe,2),Le=Pe[0],Ee=Pe[1],Ie=function(){var e=Object(b.a)(j.a.mark((function e(){var a,s,c,r,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(n&&h&&g&&k&&_&&je&&he&&ie&&ye&&fe){e.next=5;break}De("Please fill all the fields"),e.next=17;break;case 5:return(a=new FormData).append("file",ie),e.next=9,Object(O.c)("/api/picture/upload",a);case 9:return s=e.sent,c=Be(h,n),e.next=13,m.a.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(c,",israel&key=").concat("AIzaSyCZKLGFSNKwYZ0DR3JR8tlh3zVV0mM1oro"));case 13:r=e.sent,i=r.data.results[0].geometry.location,l={owner_id:t.id,city:n,address:h,lat:i.lat,lng:i.lng,room_type:fe,Hospitality:ye,description:g,number_of_peoples:k,number_of_rooms:_,kosher:F,shabat:I,parking:U,animals:H,picture:s.data,ac:Y,accessibility:$,babies:se,started_at:je,ended_at:he},Object(O.c)("/api/asset/create",l).then((function(){Re(!0)})).catch(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("/api/picture/image/".concat(t.id,"/").concat(s.data));case 2:De("Problem, please try again later");case 3:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(e,t){var a=e.split(" "),s="";"number"===typeof parseInt(a[-1])&&(s=a[-1],a.splice(-2,1));var c=a.join("+");return s?s+","+c+","+t:c+","+t};return Object(p.jsx)(p.Fragment,{children:t.isOwner?Object(p.jsxs)("div",{id:"add-asset-container",children:[Object(p.jsx)("h1",{id:"add-asset-header",children:"Add asset"}),Object(p.jsxs)("div",{className:"add-asset-form",children:[Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"City"}),Object(p.jsx)("input",{type:"text",className:"add-asset-text",onChange:function(e){return r(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Address"}),Object(p.jsx)("input",{type:"text",className:"add-asset-text",onChange:function(e){return x(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Description"}),Object(p.jsx)("input",{className:"add-asset-text",type:"text",onChange:function(e){return N(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Room Type"}),Object(p.jsxs)("select",{className:"add-asset-text",onChange:function(e){return ve(e.target.value)},children:[Object(p.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select your option"}),Object(p.jsx)("option",{value:"Apartment",children:"Apartment"}),Object(p.jsx)("option",{value:"Couch",children:"Couch"}),Object(p.jsx)("option",{value:"Separate room",children:"Separate room"}),Object(p.jsx)("option",{value:"Shared room",children:"Shared room"}),Object(p.jsx)("option",{value:"Tent",children:"Tent"})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Hospitality"}),Object(p.jsxs)("select",{className:"add-asset-text",onChange:function(e){return we(e.target.value)},children:[Object(p.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select your option"}),Object(p.jsx)("option",{value:"Full",children:"Full"}),Object(p.jsx)("option",{value:"Only sleep",children:"Only sleep"})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Number of people"}),Object(p.jsx)("input",{className:"add-asset-text",type:"number",min:"1",onChange:function(e){return S(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Number of rooms"}),Object(p.jsx)("input",{className:"add-asset-text",type:"number",min:"1",onChange:function(e){return A(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Picture"}),Object(p.jsx)("input",{className:"add-asset-text",type:"file",accept:"image/*",onChange:function(e){return le(e.target.files[0])}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Kosher"}),Object(p.jsx)("input",{className:"option-input radio",type:"checkbox",onChange:function(){return P(!F)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Shabbat"}),Object(p.jsx)("input",{type:"checkbox",className:"option-input radio",onChange:function(){return B(!I)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Parking"}),Object(p.jsx)("input",{type:"checkbox",className:"option-input radio",onChange:function(){return M(!U)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Animals"}),Object(p.jsx)("input",{type:"checkbox",className:"option-input radio",onChange:function(){return Z(!H)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"AC"}),Object(p.jsx)("input",{type:"checkbox",className:"option-input radio",onChange:function(){return X(!Y)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Accessibility"}),Object(p.jsx)("input",{className:"option-input radio",type:"checkbox",onChange:function(e){return ee(!$)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Babies"}),Object(p.jsx)("input",{type:"checkbox",className:"option-input radio",onChange:function(){return ce(!se)}})]}),Object(p.jsxs)("div",{className:"add-asset-dates",children:[Object(p.jsx)("label",{className:"add-asset-label",children:"Available dates: "}),Object(p.jsx)(u.DateRange,{editableDateInputs:!0,moveRangeOnFirstSelection:!1,onChange:function(e){return function(e){be(e.selection.startDate),me(e.selection.endDate),Ee(e.selection)}(e)},ranges:[Le],minDate:new Date})]}),Object(p.jsx)("div",{className:"button-container",children:Object(p.jsx)("button",{className:"add-asset-btn",onClick:function(){Ie()},children:"Add"})})]}),Ce&&Object(p.jsx)("p",{className:"error",children:Ce}),Te&&Object(p.jsx)(o.a,{to:"/login"})]}):Object(p.jsx)(o.a,{to:"/"})})}a(133);var f=a(47),v=a.n(f),g=(a(134),Object(s.lazy)((function(){return a.e(3).then(a.bind(null,152))}))),N=Object(s.lazy)((function(){return a.e(5).then(a.bind(null,149))})),y=Object(s.lazy)((function(){return a.e(4).then(a.bind(null,150))}));var w=function(e){var t=e.user,a=Object(s.useState)(!1),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1],u=Object(s.useState)([]),O=Object(i.a)(u,2),h=O[0],x=O[1],f=Object(s.useState)([]),v=Object(i.a)(f,2),w=v[0],k=v[1];return Object(s.useEffect)((function(){Promise.all([m.a.get("/api/asset?owner_id=".concat(t.id)),m.a.get("/api/transaction/user/all?searchBy=owner_id&value=".concat(t.id))]).then((function(e){b(e[0].data);var t=e[1].data.reduce((function(e,t){return t.owner_approvement||t.booked||e.push(t),e}),[]),a=e[1].data.reduce((function(e,t){return t.owner_approvement&&!t.booked&&e.push(t),e}),[]);h.length!==t.length&&x(t),k(a)})).catch((function(e){return console.log(e)}))}),[t.id,h]),Object(p.jsxs)("div",{id:"owner-homepage",children:[Object(p.jsxs)("div",{id:"assets-container",children:[Object(p.jsxs)("div",{className:"headlines-asset",children:[Object(p.jsx)("h2",{id:"owner-assets",children:"Assets"}),Object(p.jsxs)("div",{className:"add-asset-button-container",children:[Object(p.jsx)("button",{className:"add-asset-button",onClick:function(){return r(!0)},children:"Add asset"}),n&&Object(p.jsx)(o.a,{to:"/addAsset"})]})]}),Object(p.jsx)("div",{id:"assets",children:j.map((function(e,a){return Object(p.jsx)(s.Suspense,{fallback:Object(p.jsx)("div",{children:"Loading..."}),children:Object(p.jsx)(g,{asset:e,user:t})},a)}))})]}),Object(p.jsxs)("div",{id:"all-requests",children:[Object(p.jsxs)("div",{id:"owner-requests",children:[Object(p.jsxs)("h2",{children:["My Likes"," ",Object(p.jsxs)("span",{className:"number-orders",children:["(",h.length,")"]})]}),Object(p.jsx)("ol",{id:"transaction-list",children:h.map((function(e,t){return Object(p.jsx)(s.Suspense,{fallback:Object(p.jsx)("div",{children:"Loading..."}),children:Object(p.jsx)(N,{transaction:e,transactions:h,setTransactions:x})},t)}))})]}),Object(p.jsxs)("div",{id:"owner-pending-orders",children:[Object(p.jsxs)("h2",{children:["Need To Book",Object(p.jsxs)("span",{className:"number-orders",children:[" (",w.length,")"]})]}),Object(p.jsx)("div",{id:"owner-pending-orders-list",children:w.map((function(e,t){return Object(p.jsx)(s.Suspense,{fallback:Object(p.jsx)("div",{children:"Loading..."}),children:Object(p.jsx)(y,{needToBook:w,offer:e,setNeedToBook:k})},t)}))})]})]})]})},k=a(34);a(81);var S=function(e){var t=e.user,a=e.asset,c=e.setOpenSendRequest,n=e.startedAt,r=e.endedAt,l=Object(s.useState)(""),o=Object(i.a)(l,2),d=o[0],j=o[1],b=Object(s.useState)(new Date(n)),h=Object(i.a)(b,2),x=h[0],f=h[1],v=Object(s.useState)(new Date(r)),g=Object(i.a)(v,2),N=g[0],y=g[1],w=Object(s.useState)([]),k=Object(i.a)(w,2),S=k[0],C=k[1],D=Object(s.useState)(1),_=Object(i.a)(D,2),A=_[0],T=_[1],R=Object(s.useState)({startDate:new Date(n),endDate:new Date(r),key:"selection"}),F=Object(i.a)(R,2),P=F[0],L=F[1];Object(s.useEffect)((function(){m.a.get("/api/asset/unavailableDates/".concat(a.id)).then((function(e){var t=e.data.map((function(e){return new Date(e.date)}));C(t)})).catch((function(e){console.log(e)}))}),[a.id]);var E=function(){T(0),setTimeout((function(){c(!1)}),500)};return Object(p.jsx)("div",{className:"request-background",style:{opacity:A},children:Object(p.jsxs)("div",{className:"request-window",children:[Object(p.jsx)("button",{className:"close-btn",onClick:function(){return E()},children:"X"}),Object(p.jsxs)("div",{className:"request-content",children:[Object(p.jsx)("h3",{children:"Let's make sure we on the same page"}),Object(p.jsx)("div",{children:"The dates are: "}),Object(p.jsx)(u.DateRange,{editableDateInputs:!0,moveRangeOnFirstSelection:!1,onChange:function(e){return function(e){f(e.selection.startDate),y(e.selection.endDate),L(e.selection)}(e)},ranges:[P],minDate:new Date(a.started_at),maxDate:new Date(a.ended_at),disabledDates:S}),Object(p.jsxs)("div",{className:"request-input-container",children:[Object(p.jsx)("input",{type:"text",placeholder:"Anything we need to know...",className:"request-input-text",onChange:function(e){return j(e.target.value)}}),Object(p.jsx)("button",{className:"request-send-btn",onClick:function(){return function(){var e={asset_id:a.id,owner_id:a.owner_id,renter_id:t.id,started_at:x,ended_at:N,comments:d};Object(O.c)("/api/transaction/new",e).then((function(){E()})).catch((function(e){return console.log(e)}))}()},children:"send"})]})]})]})})},C=a(48),D=function(e){var t=e.address,a=e.city;return Object(p.jsxs)("div",{className:"asset-pin-container",children:[Object(p.jsxs)("div",{className:"asset-pin-name",children:[t,", ",a]}),Object(p.jsx)("div",{className:"asset-pin"}),Object(p.jsx)("div",{className:"asset-pin-pulse"})]})},_=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"current-pin-container"}),Object(p.jsx)("div",{className:"current-pin"})]})},A="AIzaSyCZKLGFSNKwYZ0DR3JR8tlh3zVV0mM1oro";var T=function(e){var t=e.asset,a=e.currentLocation,c=e.setCurrentLocation,n=e.setDistance;return Object(s.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(){var e=Object(b.a)(j.a.mark((function e(a){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({lat:a.coords.latitude,lng:a.coords.longitude}),e.prev=1,console.log(A),e.next=5,m.a.get("https://maps.googleapis.com/maps/api/directions/json?origin=".concat(t.lat,",").concat(t.lng,"&destination=").concat(a.coords.latitude,",").concat(a.coords.longitude,"&key=").concat(A,"&language=en"));case 5:s=e.sent,console.log(s),n(s.data.routes[0].legs[0].distance.text),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c,n]),Object(p.jsx)("div",{className:"map-container",children:a&&Object(p.jsxs)(C.a,{bootstrapURLKeys:{key:A},defaultCenter:{lat:t.lat,lng:t.lng},defaultZoom:15,children:[Object(p.jsx)(D,{lat:t.lat,lng:t.lng,address:t.address,city:t.city}),Object(p.jsx)(_,{lat:a.lat,lng:a.lng})]})})};var R=function(e){var t=e.asset,a=e.setOpenAssetCard,c=Object(s.useState)(""),n=Object(i.a)(c,2),r=n[0],l=n[1],o=Object(s.useState)(1),d=Object(i.a)(o,2),j=d[0],b=d[1],u=Object(s.useState)({lat:null,lng:null}),O=Object(i.a)(u,2),h=O[0],x=O[1],f=Object(s.useState)(""),v=Object(i.a)(f,2),g=v[0],N=v[1],y=Object(s.useState)(""),w=Object(i.a)(y,2),k=w[0],S=w[1];Object(s.useEffect)((function(){m.a.get("/api/picture/image/".concat(t.picture)).then((function(e){l(e.data)})).catch((function(e){console.log(e)}))}),[t.picture]);var C=function(e){return 1===e?"exists":"not-exists"};return Object(p.jsx)("div",{className:"asset-full-card-background",style:{opacity:j},children:Object(p.jsxs)("div",{className:"asset-full-card",children:[Object(p.jsx)("div",{className:"map",children:Object(p.jsx)(T,{asset:t,currentLocation:g,setCurrentLocation:N,assetLocation:h,setAssetLocation:x,setDistance:S})}),Object(p.jsxs)("div",{className:"asset-full-card-content",children:[Object(p.jsx)("img",{className:"asset-big-image",src:r,alt:"asset"}),Object(p.jsxs)("div",{className:"asset-data",children:[Object(p.jsxs)("div",{className:"asset-text-details",children:[Object(p.jsx)("div",{className:"asset-details",children:t.description}),Object(p.jsxs)("div",{className:"asset-details",children:["Hospitality: ",t.Hospitality]}),Object(p.jsxs)("div",{className:"asset-details",children:["Room type: ",t.room_type]}),Object(p.jsxs)("div",{className:"asset-details",children:["Number of people: ",t.number_of_peoples]}),Object(p.jsxs)("div",{className:"asset-details",children:["Number of rooms: ",t.number_of_rooms]}),Object(p.jsxs)("div",{className:"asset-details",children:[k," from you"]})]}),Object(p.jsxs)("div",{className:"accessories",children:[Object(p.jsxs)("div",{className:"asset-details",children:[Object(p.jsx)("i",{className:"fas fa-fan\n              ".concat(C(t.ac)," ")})," ","AC"]}),Object(p.jsxs)("div",{className:"asset-details",children:[Object(p.jsx)("i",{className:"fa fa-wheelchair ".concat(C(t.accessibility)," ")})," ","accessibility"]}),Object(p.jsxs)("div",{className:"asset-details",children:[Object(p.jsx)("i",{className:"fa fa-paw ".concat(C(t.animals)," ")})," Animals"]}),Object(p.jsxs)("div",{className:"asset-details",children:[Object(p.jsx)("i",{className:"fa fa-baby-carriage ".concat(C(t.babies)," ")})," ","Babies"]}),Object(p.jsxs)("div",{className:"asset-details",children:[Object(p.jsx)("i",{className:"fa fa-parking ".concat(C(t.parking)," ")})," ","Parking"]}),Object(p.jsx)("div",{className:"".concat(C(t.kosher)," "),children:"Kosher"}),Object(p.jsx)("div",{className:"".concat(C(t.shabbat)," "),children:"Shabbat"})]})]})]}),Object(p.jsx)("button",{className:"close-btn",onClick:function(){return b(0),void setTimeout((function(){a((function(e){return!e}))}),500)},children:"X"})]})})};function F(e){var t=e.user,a=e.asset,c=e.startedAt,n=e.endedAt,r=Object(s.useState)(""),l=Object(i.a)(r,2),o=l[0],d=l[1],j=Object(s.useState)(!1),b=Object(i.a)(j,2),u=b[0],O=b[1],h=Object(s.useState)(!1),x=Object(i.a)(h,2),f=x[0],v=x[1];return Object(s.useEffect)((function(){m.a.get("/api/picture/image/".concat(a.picture)).then((function(e){d(e.data)})).catch((function(e){console.log(e)}))}),[a.picture]),Object(p.jsxs)("div",{className:"asset",children:[Object(p.jsx)("img",{className:"asset-image",src:o,alt:"asset"}),Object(p.jsx)("div",{className:"asset-city",onClick:function(){return v((function(e){return!e}))},children:a.city}),Object(p.jsxs)("div",{className:"card-footer",children:[Object(p.jsxs)("button",{className:"like-btn",onClick:function(){return O((function(e){return!e}))},children:[Object(p.jsx)("i",{className:"fa fa-bell"})," ring"]}),Object(p.jsx)("span",{className:"separator"}),Object(p.jsx)("div",{className:"asset-address-card",children:a.address})]}),u&&Object(p.jsx)(S,{user:t,asset:a,setOpenSendRequest:O,startedAt:c,endedAt:n}),f&&Object(p.jsx)(R,{asset:a,setOpenAssetCard:v})]})}a(135);function P(e){var t=e.searchInput,a=e.setSearchInput,c=e.setError,n=e.setAssets,r=e.user,l=e.setStartedAt,o=e.setEndedAt,d=e.startedAt,j=e.endedAt,b=e.setFilteredAssets,O=Object(s.useState)(!1),h=Object(i.a)(O,2),x=h[0],f=h[1],v=Object(s.useState)(0),g=Object(i.a)(v,2),N=g[0],y=g[1],w=Object(s.useState)({startDate:new Date,endDate:new Date,key:"selection"}),k=Object(i.a)(w,2),S=k[0],C=k[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{className:"search-bar",type:"search",placeholder:"Search By City",value:t,onChange:function(e){return a(e.target.value)}}),Object(p.jsx)("div",{id:"date-container",children:Object(p.jsxs)("div",{id:"date-text",onClick:function(){return f((function(e){return!e}))},children:[d?d.toLocaleString().split(" ")[0].slice(0,-1):"check-in"," ","-"," ",j?j.toLocaleString().split(" ")[0].slice(0,-1):"check-out"]})}),x&&Object(p.jsx)(u.DateRange,{className:"calendar",editableDateInputs:!0,moveRangeOnFirstSelection:!1,onChange:function(e){return function(e){if(l(e.selection.startDate),o(e.selection.endDate),C(e.selection),1===N)return f((function(e){return!e})),y(0);y(N+1)}(e)},ranges:[S],minDate:new Date}),Object(p.jsx)("button",{className:"search-btn",onClick:function(){return function(){if(r&&!r.isOwner){if(!d||!j||!t)return c("Please fill all the fields");var e;e=t?"/api/asset?city=".concat(t,"&startDate=").concat(d,"&stopDate=").concat(j):"/api/asset",m.a.get(e).then((function(e){n(e.data),b(e.data),0===e.data.length?c("No city found"):c("")})).catch((function(e){console.log(e.message),c("Server problem please try again")}))}}()},children:"Search"})]})}var L="AIzaSyCZKLGFSNKwYZ0DR3JR8tlh3zVV0mM1oro";var E=function(e){var t=e.user,a=Object(s.useState)([]),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)([]),o=Object(i.a)(l,2),d=o[0],j=o[1],b=Object(s.useState)(""),u=Object(i.a)(b,2),O=u[0],h=u[1],x=Object(s.useState)(""),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(s.useState)(),y=Object(i.a)(N,2),w=y[0],S=y[1],D=Object(s.useState)(),_=Object(i.a)(D,2),A=_[0],T=_[1],R=Object(s.useState)(!1),E=Object(i.a)(R,2),I=E[0],B=E[1],q=Object(s.useState)(),z=Object(i.a)(q,2),U=z[0],M=z[1],G=Object(s.useState)([{name:"Ac",value:!1},{name:"Accessibility",value:!1},{name:"Animals",value:!1},{name:"Babies",value:!1},{name:"Kosher",value:!1},{name:"Parking",value:!1},{name:"Shabat",value:!1}]),K=Object(i.a)(G,2),H=K[0],Z=K[1];Object(s.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Y):alert("Sorry Geolocation is not supported by this browser."),J()}),[]);var V=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"current-pin-container"}),Object(p.jsx)("div",{className:"current-pin"})]})},J=function(){navigator.permissions?navigator.permissions.query({name:"geolocation"}).then((function(e){"denied"===e.state&&alert("Enable location permissions for this website in your browser settings")})):alert("Unable to access your location. You can continue by submitting location manually.")},Y=function(e){M({lat:e.coords.latitude,lng:e.coords.longitude})};return Object(p.jsxs)("div",{children:[U&&d.length<=0&&Object(p.jsxs)("div",{className:"renter-map-container",children:[Object(p.jsx)("button",{onClick:function(){m.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(U.lat,",").concat(U.lng,"&language=en&key=").concat(L)).then((function(e){return g(e.data.results[0].address_components[2].long_name)}))},className:"current-location-btn",children:"current Location"}),Object(p.jsx)("div",{className:"renter-map",children:Object(p.jsx)(C.a,{bootstrapURLKeys:{key:L},defaultCenter:{lat:U.lat,lng:U.lng},defaultZoom:11,children:Object(p.jsx)(V,{lat:U.lat,lng:U.lng,text:"My Marker"})})})]}),Object(p.jsxs)("div",{className:"search-container",children:[Object(p.jsxs)("div",{id:"search",style:{gridTemplateRows:"repeat(".concat(d.length>0?"3":"2",", 1fr)")},children:[Object(p.jsx)(P,{searchInput:v,setSearchInput:g,setError:h,setAssets:r,user:t,assets:n,setFilteredAssets:j,setStartedAt:S,setEndedAt:T,startedAt:w,endedAt:A}),d.length>0&&Object(p.jsx)("button",{className:"open-filters-btn",onClick:function(){return B((function(e){return!e}))},children:"Filters"})]}),d.length>0&&Object(p.jsx)("div",{className:"filter",style:{maxHeight:I?"100vh":"0vh",visibility:I?"visible":"hidden"},children:Object(p.jsxs)("ul",{className:"ks-cboxtags",children:[H.map((function(e,t){return Object(p.jsxs)("li",{className:"filter-option",children:[Object(p.jsx)("input",{id:"checkbox-".concat(t),defaultChecked:e.value,type:"checkbox",onChange:function(){return function(e){var t=Object(k.a)(H);t[e].value=!H[e].value,Z(t)}(t)}}),Object(p.jsx)("label",{className:"label-for-check",htmlFor:"checkbox-".concat(t),children:"Shabat"===e.name?"Shabbat":e.name})]},t)})),Object(p.jsx)("button",{className:"filter-btn",onClick:function(){return function(){var e=H.reduce((function(e,t){return t.value&&e.push(t.name.toLowerCase()),e}),[]),t=n.reduce((function(t,a){var s=!0;return e.forEach((function(e){0===a[e]&&(s=!1)})),s&&t.push(a),t}),[]);j(t),B((function(e){return!e})),h(""),0===t.length&&h("no assets found")}()},children:"Filter"})]})})]}),O?Object(p.jsx)("div",{children:O}):"",Object(p.jsx)("div",{className:"assets-container",children:d.map((function(e,a){return Object(p.jsx)(F,{user:t,asset:e,startedAt:w,endedAt:A},a)}))})]})};var I=function(e){var t=e.openPopup;return Object(p.jsx)("div",{className:"box",children:Object(p.jsxs)("div",{className:"popup-container",children:[Object(p.jsx)("div",{className:"header",children:Object(p.jsx)("h1",{className:"story",children:" Our Story"})}),Object(p.jsxs)("div",{className:"popup-content",children:[Object(p.jsx)("p",{className:"popup-text",children:"This application was established in 2021 after the Operation Guardian of the Walls, by Omer Botbol, Shira Meirovitz and Noa Shalom as part of a program for veterans that operated by Scale-Up Velocity in cooperation with the IDF and the cyber system."}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{className:"popup-text",children:"The purpose of the application is to reflect the knowledge acquired after five months of training and has one vision: to create and expand the circles of volunteering and giving in Israeli society, with an emphasis on free accommodation. In order to promote this vision, we have developed an application that makes accessible and quick search for accommodation, as well as advertising accommodation at the click of a button."}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{className:"popup-text",children:"We believe that volunteering can and should become public domain, and that the way there is through quality technology."})]}),Object(p.jsx)("button",{className:"close-popup-btn",onClick:function(){return t(!1)},children:"X"})]})})};var B=function(e){var t=e.user,a=Object(s.useState)(!0),c=Object(i.a)(a,2),n=c[0],r=c[1],o=Object(s.useState)(!1),d=Object(i.a)(o,2),j=d[0],b=d[1];return Object(s.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]),Object(p.jsx)("div",{id:"homepage",children:n?Object(p.jsx)("div",{className:"loader",children:Object(p.jsx)(v.a,{color:"#00887a",loading:n,size:150})}):Object(p.jsx)("div",{className:t?"homepage-user-container":"homepage-container",children:t?Object(p.jsx)(p.Fragment,{children:t.isOwner?Object(p.jsx)(w,{user:t}):Object(p.jsx)(E,{user:t})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{id:"welcome",children:"welcome to"}),Object(p.jsx)("h1",{id:"homepage-header",children:"Bedder"}),Object(p.jsxs)("div",{id:"homepage-btn",children:[Object(p.jsx)(l.b,{className:"link",to:"/login",children:"login"}),Object(p.jsx)(l.b,{className:"link",to:"/register",children:"Register"})]}),Object(p.jsx)("button",{className:"about",onClick:function(){return b(!0)},children:"ABOUT US"}),j&&Object(p.jsx)(I,{openPopup:b})]})})})},q=(a(141),a(11));var z=function(e){var t=e.user,a=e.setUser,c=(e.postion,Object(s.useState)("")),n=Object(i.a)(c,2),r=n[0],l=n[1],d=Object(s.useState)(""),u=Object(i.a)(d,2),O=u[0],h=u[1],x=Object(s.useState)([]),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(s.useState)(!1),y=Object(i.a)(N,2),w=y[0],k=y[1],S=Object(s.useState)(""),C=Object(i.a)(S,2),D=C[0],_=C[1],A=Object(s.useState)(!1),T=Object(i.a)(A,2),R=T[0],F=T[1],P=Object(s.useState)(!1),L=Object(i.a)(P,2),E=L[0],I=L[1],B=Object(s.useState)(1),z=Object(i.a)(B,2),U=z[0],M=z[1],G=function(){var e=Object(b.a)(j.a.mark((function e(){var t,s,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:r,password:O},e.prev=1,e.next=4,m.a.post("/api/login",t);case 4:1===(s=e.sent).data.length?(c=s.data[0],Object(q.a)("accessToken",c.accessToken,9e5),Object(q.a)("refreshToken",c.refreshToken),console.log("success logging in"),n={email:c.email,isOwner:c.isOwner,id:c.id},a(n)):(g(s.data),I(!0)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error invalid user"),_("User name, password or customer type are incorrect");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[t?Object(p.jsx)(o.a,{to:"/"}):Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"container_content",children:Object(p.jsxs)("div",{className:"container_content_inner",children:[Object(p.jsx)("div",{className:"title",children:Object(p.jsx)("h1",{className:"headline",children:"LOGIN"})}),Object(p.jsxs)("div",{className:"par",children:[Object(p.jsx)("input",{className:"loginAdd text",type:"email",placeholder:"Enter email",onChange:function(e){return l(e.target.value)},required:!0}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{className:"loginAdd text",type:"password",placeholder:"Enter password",onChange:function(e){return h(e.target.value)},required:!0}),Object(p.jsx)("div",{className:"btns",children:Object(p.jsx)("button",{onClick:function(){return G()},className:"btns_more",variant:"contained",children:"LOGIN"})}),E&&Object(p.jsx)("div",{className:"labels-container",style:{opacity:U},children:Object(p.jsxs)("div",{className:"login-customer-type",children:[Object(p.jsxs)("div",{className:"labelName login-labels",children:[Object(p.jsx)("div",{className:"label",children:"Host"}),Object(p.jsx)("input",{className:"option-input radio",type:"radio",name:"customer",value:!0,onChange:function(e){k("true"===e.target.value),F(!0)}}),Object(p.jsx)("div",{className:"label",children:"Guest"}),Object(p.jsx)("input",{className:"option-input radio",type:"radio",name:"customer",value:!1,onChange:function(e){k("true"===e.target.value),F(!0)}})]}),Object(p.jsx)("button",{className:"next-btn",onClick:function(){return function(){if(R){var e=w?v[0]:v[1];Object(q.a)("accessToken",e.accessToken,9e5),Object(q.a)("refreshToken",e.refreshToken),a({email:e.email,isOwner:e.isOwner,id:e.id})}else M(0),setTimeout((function(){I(!1),M(1)}),400)}()},children:"next"})]})}),Object(p.jsx)("div",{children:D})]})]})})}),Object(p.jsx)("div",{className:"overlay"})]})};a(142);var U=function(e){var t=e.user,a=Object(s.useState)(""),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)(""),d=Object(i.a)(l,2),j=d[0],b=d[1];return Object(p.jsx)(p.Fragment,{children:t?Object(p.jsx)(o.a,{to:"/"}):Object(p.jsxs)("div",{id:"register-container",children:[Object(p.jsx)("h1",{id:"register-header",children:"Register as"}),Object(p.jsxs)("div",{id:"register-options",children:[Object(p.jsxs)("div",{className:"register-label",children:[Object(p.jsx)("div",{className:"loginAdd label",children:"Host"})," ",Object(p.jsx)("input",{className:"loginAdd option-input radio",type:"radio",name:"customer",onClick:function(){return b("Owner")}})]}),Object(p.jsxs)("div",{className:"register-label",children:[Object(p.jsx)("div",{className:"loginAdd label",children:"Guest"})," ",Object(p.jsx)("input",{className:"loginAdd option-input radio",type:"radio",name:"customer",onClick:function(){return b("Renter")}})]})]}),Object(p.jsx)("div",{className:"next-btn",onClick:function(){r(j)},children:"Next"}),"Owner"===n&&Object(p.jsx)(o.a,{to:"/ownerRegister"}),"Renter"===n&&Object(p.jsx)(o.a,{to:"/renterRegister"})]})})};var M=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Not Found"})})};a(82);var G=function(e){var t=e.user,a=Object(s.useState)(""),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)(""),d=Object(i.a)(l,2),u=d[0],h=d[1],x=Object(s.useState)(""),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(s.useState)(""),y=Object(i.a)(N,2),w=y[0],k=y[1],S=Object(s.useState)(""),C=Object(i.a)(S,2),D=C[0],_=C[1],A=Object(s.useState)(!1),T=Object(i.a)(A,2),R=T[0],F=T[1],P=Object(s.useState)(""),L=Object(i.a)(P,2),E=L[0],I=L[1],B=Object(s.useState)(""),q=Object(i.a)(B,2),z=q[0],U=q[1],M=Object(s.useState)(""),G=Object(i.a)(M,2),K=G[0],H=G[1],Z=Object(s.useState)(""),V=Object(i.a)(Z,2),J=V[0],Y=V[1],X=Object(s.useState)(!1),W=Object(i.a)(X,2),Q=W[0],$=W[1],ee=function(){var e=Object(b.a)(j.a.mark((function e(){var a,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&u&&v&&w&&E&&z&&K){e.next=4;break}Y("Please fill all the fields"),e.next=15;break;case 4:if(!R){e.next=14;break}return(a=new FormData).append("file",z),e.next=9,Object(O.c)("/api/picture/upload",a);case 9:s=e.sent,c={first_name:n,last_name:u,email:v,password:w,purpose:E,picture:s.data,phone_number:K},m.a.post("/api/renter/create",c).then((function(){$(!0)})).catch(function(){var e=Object(b.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"401"===a.message.slice(-3)?Y("Invalid password or email"):"409"===a.message.slice(-3)?Y("Email already exists"):Y("Problem, please try again later"),e.next=3,Object(O.a)("/api/picture/image/".concat(t.id,"/").concat(s.data));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 14:Y("Password doesn't match");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{id:"renter-register-page",children:t?Object(p.jsx)(o.a,{to:"/"}):Object(p.jsxs)("div",{id:"renter-register-container",children:[Object(p.jsx)("h1",{id:"renter-register-header",children:"Register"}),Object(p.jsxs)("div",{className:"form",children:[Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"First Name"}),Object(p.jsx)("input",{type:"text",className:"register-text",onChange:function(e){return r(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Last Name"}),Object(p.jsx)("input",{type:"text",className:"register-text",onChange:function(e){return h(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Email"}),Object(p.jsx)("input",{type:"email",className:"register-text",onChange:function(e){return g(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"register-text",onChange:function(e){return k(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Confirm password"}),Object(p.jsxs)("div",{className:"form-field confirm-password-container",children:[D&&Object(p.jsx)("i",{className:"fa fa-".concat(R?"check":"times","-circle-o register-symbol"),style:{color:R?"#00887a":"#e2144d"},"aria-hidden":"true"}),Object(p.jsx)("input",{type:"password",className:"confirm-password",onChange:function(e){return t=e.target.value,_(t),void F(t===w);var t}})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Picture"}),Object(p.jsxs)("div",{className:"file-wrapper",children:[Object(p.jsx)("label",{className:"file-name",children:z.name}),Object(p.jsx)("span",{children:" "}),Object(p.jsx)("label",{className:"file-label",children:"upload"}),Object(p.jsx)("input",{className:"input-file",type:"file",accept:"image/*",onChange:function(e){return U(e.target.files[0])}})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Phone Number"}),Object(p.jsx)("input",{type:"text",className:"register-text",onChange:function(e){return H(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Purpose"}),Object(p.jsx)("textarea",{rows:"5",cols:"10",className:"register-purpose",onChange:function(e){return I(e.target.value)}})]})]}),Object(p.jsx)("div",{className:"register-btn",onClick:function(){return ee()},children:"Register"}),J&&Object(p.jsx)("div",{className:"error",children:J}),Q&&Object(p.jsx)(o.a,{to:"/login"})]})})};var K=function(e){var t=e.user,a=Object(s.useState)(""),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)(""),d=Object(i.a)(l,2),u=d[0],h=d[1],x=Object(s.useState)(""),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(s.useState)(""),y=Object(i.a)(N,2),w=y[0],k=y[1],S=Object(s.useState)(""),C=Object(i.a)(S,2),D=C[0],_=C[1],A=Object(s.useState)(!1),T=Object(i.a)(A,2),R=T[0],F=T[1],P=Object(s.useState)(""),L=Object(i.a)(P,2),E=L[0],I=L[1],B=Object(s.useState)(""),q=Object(i.a)(B,2),z=q[0],U=q[1],M=Object(s.useState)(!1),G=Object(i.a)(M,2),K=G[0],H=G[1],Z=Object(s.useState)(""),V=Object(i.a)(Z,2),J=V[0],Y=V[1],X=function(){var e=Object(b.a)(j.a.mark((function e(){var a,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&u&&v&&w&&J&&E){e.next=4;break}U("Please fill all the fields"),e.next=15;break;case 4:if(!R){e.next=14;break}return(a=new FormData).append("file",J),e.next=9,Object(O.c)("/api/picture/upload",a);case 9:s=e.sent,c={first_name:n,last_name:u,email:v,password:w,picture:s.data,phone_number:E},m.a.post("/api/owner/create",c).then((function(){H(!0)})).catch(function(){var e=Object(b.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"401"===a.message.slice(-3)?U("Invalid password or email"):"409"===a.message.slice(-3)?U("Email already exists"):U("Problem, please try again later"),e.next=3,Object(O.a)("/api/picture/image/".concat(t.id,"/").concat(s.data));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 14:U("Password doesn't match");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{id:"renter-register-page",children:t?Object(p.jsx)(o.a,{to:"/"}):Object(p.jsxs)("div",{id:"renter-register-container",children:[Object(p.jsx)("h1",{id:"renter-register-header",children:"Register"}),Object(p.jsxs)("div",{className:"form",children:[Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"First name"}),Object(p.jsx)("input",{className:"register-text",onChange:function(e){return r(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Last name"}),Object(p.jsx)("input",{className:"register-text",onChange:function(e){return h(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Email"}),Object(p.jsx)("input",{className:"register-text",type:"email",onChange:function(e){return g(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Password"}),Object(p.jsx)("input",{className:"register-text",type:"password",onChange:function(e){return k(e.target.value)}})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Confirm password"}),Object(p.jsxs)("div",{className:"form-field confirm-password-container",children:[D&&Object(p.jsx)("i",{className:"fa fa-".concat(R?"check":"times","-circle-o register-symbol"),style:{color:R?"#00887a":"#e2144d"},"aria-hidden":"true"}),Object(p.jsx)("input",{type:"password",className:"confirm-password",onChange:function(e){return t=e.target.value,_(t),void F(t===w);var t}})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Picture"}),Object(p.jsxs)("div",{className:"file-wrapper",children:[Object(p.jsx)("label",{className:"file-name",children:J.name}),Object(p.jsx)("span",{children:" "}),Object(p.jsx)("label",{className:"file-label",children:"upload"}),Object(p.jsx)("input",{className:"input-file",type:"file",accept:"image/*",onChange:function(e){return Y(e.target.files[0])}})]})]}),Object(p.jsxs)("div",{className:"form-field",children:[Object(p.jsx)("label",{className:"register-label",children:"Phone number"}),Object(p.jsx)("input",{className:"register-text",onChange:function(e){return I(e.target.value)}})]})]}),Object(p.jsx)("div",{className:"register-btn",onClick:function(){return X()},children:"Register"}),z&&Object(p.jsx)("div",{className:"error",children:z}),K&&Object(p.jsx)(o.a,{to:"/login"})]})})};a(143);function H(e){var t=e.user,a=Object(s.useState)({}),c=Object(i.a)(a,2),n=c[0],r=c[1],l=Object(s.useState)(""),d=Object(i.a)(l,2),u=d[0],O=d[1],h=Object(s.useState)(!0),x=Object(i.a)(h,2),f=x[0],g=x[1];return Object(s.useEffect)((function(){setTimeout((function(){g(!1)}),1e3)}),[]),Object(s.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var a,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return a=t.isOwner?"owner":"renter",e.next=4,m.a.get("/api/".concat(a,"/").concat(t.id));case 4:return s=e.sent,e.next=7,m.a.get("/api/picture/image/".concat(s.data.picture));case 7:c=e.sent,r(s.data),O(c.data);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(p.jsx)(p.Fragment,{children:f?Object(p.jsx)("div",{className:"loader",children:Object(p.jsx)(v.a,{color:"#00887a",loading:f,size:150})}):Object(p.jsx)("div",{className:"profile-container",children:t?Object(p.jsxs)("div",{className:t.isOwner?"profile-owner":"profile-renter",children:[Object(p.jsx)("img",{src:u,alt:"profile",className:"profile-picture"}),Object(p.jsxs)("h1",{className:"profile-name",children:[n.first_name," ",n.last_name]}),Object(p.jsx)("p",{children:n.email}),Object(p.jsx)("p",{children:n.phone_number}),Object(p.jsx)("div",{})]}):Object(p.jsx)(o.a,{to:"/"})})})}a(144);var Z=function(e){var t=e.user,a=e.setUser,c=Object(s.useState)({}),n=Object(i.a)(c,2),r=n[0],o=n[1];return Object(s.useEffect)((function(){if(t){var e=t.isOwner?"owner":"renter";m.a.get("/api/".concat(e,"/").concat(t.id)).then((function(e){return o(e.data)})).catch((function(e){return console.log(e)}))}}),[t]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{id:"top-navbar",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("i",{className:"fa fa-user-circle".concat(t.isOwner?"-o":""),"aria-hidden":"true"}),Object(p.jsx)("span",{children:" "}),Object(p.jsxs)("span",{id:"user-name",children:[r.first_name," ",r.last_name]})]}),Object(p.jsx)("li",{className:"navbar-title",children:"Bedder"})]}),Object(p.jsxs)("div",{className:"nav",children:[Object(p.jsx)("input",{type:"checkbox"}),Object(p.jsx)("span",{}),Object(p.jsx)("span",{}),Object(p.jsxs)("div",{className:"menu",children:[Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{className:"option-link",to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{className:"option-link",to:"/profile",children:"Profile"})}),Object(p.jsx)("li",{className:"option-link",children:Object(p.jsx)(l.b,{className:"option-link",to:"/orders",children:"My orders"})}),Object(p.jsx)("li",{className:"option-link",onClick:function(){Object(q.b)("accessToken"),Object(q.b)("refreshToken"),a("")},children:"logout"})]})]})]})};a(83);var V=function(e){var t=e.user,a=e.order,c=e.orders,n=e.setOrders,r=Object(s.useState)(),l=Object(i.a)(r,2),o=l[0],d=l[1],j=Object(s.useState)(),b=Object(i.a)(j,2),u=b[0],h=b[1];return Object(s.useEffect)((function(){if(t){var e=t.isOwner?"renter/".concat(a.renter_id):"owner/".concat(a.owner_id);Promise.all([m.a.get("/api/".concat(e)),m.a.get("/api/asset/".concat(a.asset_id))]).then((function(e){d(e[0].data),h(e[1].data)}))}}),[t,a]),Object(p.jsx)("div",{className:"alert",children:o&&u&&Object(p.jsxs)(p.Fragment,{children:[t.isOwner?Object(p.jsxs)("div",{className:"owner-alert",children:[Object(p.jsxs)("div",{className:"alert-line",children:["Guest Name:"," ",Object(p.jsxs)("span",{className:"alert-data",children:[o.first_name," ",o.last_name]})]}),Object(p.jsxs)("div",{className:"alert-line",children:["Address:"," ",Object(p.jsxs)("span",{className:"alert-data",children:[u.address,", ",u.city]})]}),Object(p.jsxs)("div",{className:"alert-line",children:["Dates:"," ",Object(p.jsxs)("span",{className:"alert-data",children:[new Date(a.started_at).toLocaleDateString()," -",new Date(a.ended_at).toLocaleDateString()]})]}),Object(p.jsxs)("div",{className:"status ".concat(a.status),children:["status: ",a.status]})]}):Object(p.jsxs)("div",{className:"renter-alert",children:[Object(p.jsxs)("div",{className:"alert-line",children:["Address:"," ",Object(p.jsxs)("span",{className:"alert-data",children:[u.address,", ",u.city]})]}),Object(p.jsxs)("div",{className:"alert-line",children:["Dates:"," ",Object(p.jsxs)("span",{className:"alert-data",children:[new Date(a.started_at).toLocaleDateString()," -",new Date(a.ended_at).toLocaleDateString()]})]}),"pending"!==a.status&&Object(p.jsxs)("div",{className:"alert-line",children:["Contact Man:"," ",Object(p.jsx)("div",{className:"alert-data",children:Object(p.jsxs)("a",{href:"https://wa.me/".concat(o.phone_number),className:"whatsapp-icon",children:[Object(p.jsx)("i",{className:"fab fa-whatsapp"}),o.phone_number]})})]}),Object(p.jsxs)("div",{className:"status ".concat(a.status),children:["status: ",a.status]})]}),Object(p.jsx)("button",{className:"delete-order-btn",onClick:function(){return function(){var e={ownerId:t.id,asset_id:u.id,startedAt:a.started_at,endedAt:a.ended_at};Promise.all([Object(O.a)("/api/transaction",{id:a.id}),Object(O.a)("/api/asset/deleteUnavailableDates",e)]).then((function(){var e=Object(k.a)(c),t=e.findIndex((function(e){return e.id===a.id}));e.splice(t,1),n(e)})).catch((function(e){return console.log(e)}))}()},children:"Cancel"})]})})};var J=function(e){var t=e.user,a=Object(s.useState)([]),c=Object(i.a)(a,2),n=c[0],r=c[1];Object(s.useEffect)((function(){if(t){var e=t.isOwner?"owner_id":"renter_id";m.a.get("/api/transaction/user/all?searchBy=".concat(e,"&value=").concat(t.id)).then((function(e){var t=e.data.reduce((function(e,t){return t.owner_approvement&&t.booked&&(t.status="booked"),t.owner_approvement&&!t.booked&&(t.status="open"),t.owner_approvement||t.booked||(t.status="pending"),e.push(t),e}),[]);r(l(t))}))}}),[t]);var l=function(e){var t={pending:0,open:1,booked:2};return e.sort((function(e,a){return t[e.status]-t[a.status]})),e};return Object(p.jsx)("div",{id:"my-orders",children:t?Object(p.jsxs)("div",{id:"my-orders-container",children:[Object(p.jsx)("h1",{id:"my-orders-header",children:"My Orders"}),Object(p.jsx)("div",{id:"all-orders",children:n.length>0?n.map((function(e,a){return Object(p.jsx)(V,{user:t,order:e,orders:n,setOrders:r},a)})):Object(p.jsx)("p",{id:"no-orders-message",children:"no orders"})})]}):Object(p.jsx)(o.a,{to:"/"})})};var Y=function(){var e=Object(s.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(!0),r=Object(i.a)(n,2),d=r[0],j=r[1];return Object(s.useEffect)((function(){m.a.interceptors.response.use((function(e){return e}),(function(e){var t=Object(q.c)("refreshToken");return"401"===e.message.slice(-3)&&t&&!Object(q.c)("accessToken")?m.a.post("/api/refreshToken",{refreshToken:t}).then((function(t){if(t.data.accessToken)return Object(q.a)("accessToken",t.data.accessToken,9e5),e.config.headers.authorization="Bearer "+t.data.accessToken,m.a.request(e.config);Object(q.b)("refreshToken")})):Promise.reject(e)}))})),Object(s.useEffect)((function(){Object(O.b)("/api/data","accessToken").then((function(e){var t={email:e.data.email,isOwner:e.data.isOwner,id:e.data.id};c(t)})).catch((function(e){if("401"===!e.message.slice(-3))return console.log(e.message)})),setTimeout((function(){j(!1)}),1e3)}),[]),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(l.a,{children:[a&&!d?Object(p.jsx)(Z,{user:a,setUser:c}):"",Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/",children:Object(p.jsx)(B,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/login",children:Object(p.jsx)(z,{user:a,setUser:c})}),Object(p.jsx)(o.b,{exact:!0,path:"/register",children:Object(p.jsx)(U,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/renterRegister",children:Object(p.jsx)(G,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/ownerRegister",children:Object(p.jsx)(K,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/profile",children:Object(p.jsx)(H,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/addAsset",children:Object(p.jsx)(x,{user:a})}),Object(p.jsx)(o.b,{exact:!0,path:"/orders",children:Object(p.jsx)(J,{user:a})}),Object(p.jsx)(o.b,{component:M})]})]})})},X=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,151)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),n(e),r(e)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(Y,{})}),document.getElementById("root")),X()},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){}},[[145,1,2]]]);
//# sourceMappingURL=main.1060fedc.chunk.js.map